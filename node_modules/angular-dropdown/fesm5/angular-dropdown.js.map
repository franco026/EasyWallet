{"version":3,"file":"angular-dropdown.js.map","sources":["ng://angular-dropdown/lib/angular-dropdown-control.directive.ts","ng://angular-dropdown/lib/utils.ts","ng://angular-dropdown/lib/angular-dropdown.directive.ts","ng://angular-dropdown/lib/angular-dropdown-content.component.ts","ng://angular-dropdown/lib/angular-dropdown.module.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Inject,\n  forwardRef,\n  Input,\n  Host,\n  HostListener\n} from '@angular/core';\n\nimport { AngularDropdownDirective }\n  from './angular-dropdown.directive';\n\n@Directive({\n  selector: '[ng-dropdown-control],[ngDropdownControl]',\n  host: {\n    '[attr.aria-haspopup]': 'true',\n    '[attr.aria-controls]': 'dropdown.id',\n    '[attr.aria-expanded]': 'dropdown.isOpen',\n    '[class.ng-dropdown-control]': 'true',\n    '[class.active]': 'dropdown.isOpen'\n  }\n})\nexport class AngularDropdownControlDirective {\n  @HostListener('click', [ '$event' ])\n  onClick(e: Event): void {\n    e.stopPropagation();\n\n    if (!this.dropdown.disabled) {\n      this.dropdown.toggle();\n    }\n  }\n\n  constructor(\n      @Host()\n      @Inject(forwardRef(() => AngularDropdownDirective))\n      public dropdown: AngularDropdownDirective,\n      public element: ElementRef) {\n  }\n}\n","export function waitForAnimation(element: Element, callback: (e?: Event) => any): void {\n  requestAnimationFrame(() => {\n    let computedStyle = window.getComputedStyle(element);\n\n    if (computedStyle.animationName !== 'none' &&\n        computedStyle.animationPlayState === 'running') {\n      return once(element, 'animationend', callback);\n    }\n\n    callback();\n  });\n}\n\nfunction once(element: Node, eventName: string, listener: (e: Event) => any): void {\n  element.addEventListener(eventName, function listenOnce(e) {\n    element.removeEventListener(eventName, listenOnce);\n\n    return listener(e);\n  });\n}\n\nexport const closest: (element: Element, selector: string) => Element | null\n  = (window as any).Element && Element.prototype.closest ?\n    (el, s) => el.closest(s) :\n    function closest(self: Element, s: string) {\n      let matches = ((self as any).document || self.ownerDocument).querySelectorAll(s),\n        i,\n      el = self;\n      do {\n        i = matches.length;\n        while (--i >= 0 && matches.item(i) !== el) {};\n      } while ((i < 0) && (el = el.parentElement!));\n      return el;\n    };\n\nexport function calculatePosition(\n  trigger: Element,\n  dropdown: Element,\n  { horizontalPosition, verticalPosition, matchTriggerWidth, previousHorizontalPosition, previousVerticalPosition }: any): any {\n  // Collect information about all the involved DOM elements\n  let scroll = { left: window.pageXOffset, top: window.pageYOffset };\n  let {\n    left: triggerLeft,\n    top: triggerTop,\n    width: triggerWidth,\n    height: triggerHeight\n  } = trigger.getBoundingClientRect();\n  let {\n    height: dropdownHeight,\n    width: dropdownWidth\n  } = dropdown.getBoundingClientRect();\n  let viewportWidth = window.innerWidth;\n  let style: any = {};\n\n  // Calculate drop down width\n  dropdownWidth = matchTriggerWidth ? triggerWidth : dropdownWidth;\n  if (matchTriggerWidth) {\n    style.width = dropdownWidth;\n  }\n\n  // Calculate horizontal position\n  let triggerLeftWithScroll = triggerLeft + scroll.left;\n  if (horizontalPosition === 'auto') {\n    // Calculate the number of visible horizontal pixels if we were to place the\n    // dropdown on the left and right\n    let leftVisible = Math.min(viewportWidth, triggerLeft + dropdownWidth) - Math.max(0, triggerLeft);\n    let rightVisible = Math.min(viewportWidth, triggerLeft + triggerWidth) - Math.max(0, triggerLeft + triggerWidth - dropdownWidth);\n\n    if (dropdownWidth > leftVisible && rightVisible > leftVisible) {\n      // If the drop down won't fit left-aligned, and there is more space on the\n      // right than on the left, then force right-aligned\n      horizontalPosition = 'right';\n    } else if (dropdownWidth > rightVisible && leftVisible > rightVisible) {\n      // If the drop down won't fit right-aligned, and there is more space on\n      // the left than on the right, then force left-aligned\n      horizontalPosition = 'left';\n    } else {\n      // Keep same position as previous\n      horizontalPosition = previousHorizontalPosition || 'left';\n    }\n  }\n  if (horizontalPosition === 'right') {\n    style.right = viewportWidth - (triggerLeftWithScroll + triggerWidth);\n  } else if (horizontalPosition === 'center') {\n    style.left = triggerLeftWithScroll + (triggerWidth - dropdownWidth) / 2;\n  } else {\n    style.left = triggerLeftWithScroll;\n  }\n\n  // Calculate vertical position\n  let triggerTopWithScroll = triggerTop + scroll.top;\n  if (verticalPosition === 'above') {\n    style.top = triggerTopWithScroll - dropdownHeight;\n  } else if (verticalPosition === 'below') {\n    style.top = triggerTopWithScroll + triggerHeight;\n  } else {\n    let viewportBottom = scroll.top + self.window.innerHeight;\n    let enoughRoomBelow = triggerTopWithScroll + triggerHeight + dropdownHeight < viewportBottom;\n    let enoughRoomAbove = triggerTop > dropdownHeight;\n\n    if (previousVerticalPosition === 'below' && !enoughRoomBelow && enoughRoomAbove) {\n      verticalPosition = 'above';\n    } else if (previousVerticalPosition === 'above' && !enoughRoomAbove && enoughRoomBelow) {\n      verticalPosition = 'below';\n    } else if (!previousVerticalPosition) {\n      verticalPosition = enoughRoomBelow ? 'below' : 'above';\n    } else {\n      verticalPosition = previousVerticalPosition;\n    }\n    style.top = triggerTopWithScroll + (verticalPosition === 'below' ? triggerHeight : -dropdownHeight);\n  }\n\n  return { horizontalPosition, verticalPosition, style };\n}\n\nexport function calculateInPlacePosition(\n    trigger: Element,\n    dropdown: Element,\n    { horizontalPosition, verticalPosition }: any) {\n  let dropdownRect;\n  let positionData: any = {};\n\n  if (horizontalPosition === 'auto') {\n    let triggerRect = trigger.getBoundingClientRect();\n    dropdownRect = dropdown.getBoundingClientRect();\n    let viewportRight = window.pageXOffset + window.innerWidth;\n    positionData.horizontalPosition = triggerRect.left + dropdownRect.width > viewportRight ? 'right' : 'left';\n  }\n  if (verticalPosition === 'above') {\n    positionData.verticalPosition = verticalPosition;\n    dropdownRect = dropdownRect || dropdown.getBoundingClientRect();\n    positionData.style = { top: -dropdownRect.height };\n  }\n  return positionData;\n}\n","import { Observable, BehaviorSubject, of } from 'rxjs';\nimport { skip, first, filter } from 'rxjs/operators';\n\nimport {\n  Component,\n  Directive,\n  Attribute,\n  Inject,\n  Input,\n  Output,\n  ElementRef,\n  AfterViewInit,\n  OnChanges,\n  ContentChild,\n  SimpleChanges,\n  EventEmitter,\n  QueryList,\n  ViewContainerRef,\n  forwardRef\n} from '@angular/core';\n\nimport { DOCUMENT } from '@angular/common';\n\nimport { AngularDropdownControlDirective } from './angular-dropdown-control.directive';\nimport { AngularDropdownContentComponent } from './angular-dropdown-content.component';\n\nimport { calculatePosition, calculateInPlacePosition } from './utils';\n\nexport interface AngularDropdownPositionChanges {\n  vPosition: 'above' | 'below';\n  hPosition: 'right' | 'center' | 'left';\n}\n\nlet id = 1;\nfunction generateDropdownId() {\n  return id++;\n}\n\nexport type VerticalPosition = 'auto' | 'above' | 'below';\nexport type HorizontalPosition = 'auto' | 'right' | 'center' | 'left';\n\nexport interface DropdownContentPosition {\n  readonly hPosition: HorizontalPosition | null;\n  readonly vPosition: VerticalPosition | null;\n  readonly top: string | null;\n  readonly left: string | null;\n  readonly bottom: string | null;\n  readonly right: string | null;\n}\n\nconst EmptyDropdownContentPosition = Object.freeze({\n  vPosition: null,\n  hPosition: null,\n  top: null,\n  left: null,\n  bottom: null,\n  right: null\n});\n\n@Directive({\n  selector: 'ng-dropdown,[ngDropdown],[ng-dropdown]',\n  host: {\n    '[class.render-in-place]': 'renderInPlace',\n    '[class.ng-dropdown]': 'true'\n  }\n})\nexport class AngularDropdownDirective implements OnChanges {\n  id?: string;\n\n  @Input()\n  renderInPlace = false;\n\n  @ContentChild(AngularDropdownControlDirective)\n  control: AngularDropdownControlDirective | null = null;\n\n  previousVerticalPosition: VerticalPosition | null = null;\n  previousHorizontalPosition: HorizontalPosition | null = null;\n  matchTriggerWidth = false;\n\n  private _isOpen$ = new BehaviorSubject(false);\n  isOpen$ = this._isOpen$.pipe(skip(1));\n\n  position$ = new BehaviorSubject<Readonly<DropdownContentPosition>>(\n    EmptyDropdownContentPosition\n  );\n\n  get dropdownId() {\n    return `ng-dropdown-content-${this.uniqueId}`;\n  }\n\n  @Input()\n  calculatePosition: Function = calculatePosition;\n  @Input()\n  calculateInPlacePosition: Function = calculateInPlacePosition;\n\n  @Input()\n  disabled = false;\n\n  @Input()\n  beforeOpen: (() => boolean | Observable<boolean>) | null = null;\n\n  @Input()\n  beforeClose: (() => boolean | Observable<boolean>) | null = null;\n\n  @Input()\n  public verticalPosition: VerticalPosition = 'auto';\n  @Input()\n  public horizontalPosition: HorizontalPosition = 'auto';\n\n  @Output('open')\n  onOpen = this.isOpen$.pipe(filter(open => open === true));\n\n  @Output('close')\n  onClose = this.isOpen$.pipe(filter(open => open === false));\n\n  get triggerElement(): HTMLElement {\n    return this.control!.element.nativeElement;\n  }\n\n  get dropdownElement(): HTMLElement {\n    return this.document.getElementById(this.dropdownId)!;\n  }\n\n  @ContentChild(forwardRef(() => AngularDropdownContentComponent))\n  private dropdownContent?: AngularDropdownContentComponent;\n\n  private uniqueId: number | string | null = null;\n  private width: number | null = null;\n  private document: Document;\n\n  constructor(@Inject(DOCUMENT) document: any, @Attribute('id') id?: string) {\n    this.document = document;\n    this.initializeId(id);\n    this.createDefaultWormholeOutlet();\n  }\n\n  ngOnChanges({ disabled }: SimpleChanges): void {\n    if (\n      disabled &&\n      disabled.firstChange === false &&\n      disabled.currentValue === true &&\n      disabled.previousValue !== true\n    ) {\n      this.disable();\n    }\n  }\n\n  open(): void {\n    if (this.disabled || this._isOpen$.getValue()) {\n      return;\n    }\n\n    let open$ = of(true);\n\n    if (this.beforeOpen) {\n      const result = this.beforeOpen();\n      open$ = result instanceof Observable ? result : of(result);\n    }\n\n    open$\n      .pipe(\n        first(),\n        filter(open => open === true)\n      )\n      .subscribe(() => this._isOpen$.next(true));\n  }\n\n  close(skipFocus = false): void {\n    if (this.disabled || !this._isOpen$.getValue()) {\n      return;\n    }\n\n    let close$ = of(true);\n\n    if (this.beforeClose) {\n      const result = this.beforeClose();\n      close$ = result instanceof Observable ? result : of(result);\n    }\n\n    close$\n      .pipe(\n        first(),\n        filter(close => close === true)\n      )\n      .subscribe(() => {\n        Object.assign(this, {\n          hPosition: null,\n          vPosition: null,\n          top: null,\n          right: null,\n          bottom: null,\n          left: null,\n          width: null,\n          previousVerticalPosition: null,\n          previousHorizontalPosition: null\n        });\n        this._isOpen$.next(false);\n\n        if (!skipFocus) {\n          if (\n            this.triggerElement instanceof HTMLElement &&\n            this.triggerElement.tabIndex > -1\n          ) {\n            this.triggerElement.focus();\n          }\n        }\n      });\n  }\n\n  toggle(): void {\n    if (this._isOpen$.getValue()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  disable(): void {\n    this.disabled = true;\n    this.close();\n  }\n\n  enable(): void {\n    this.disabled = false;\n  }\n\n  reposition = (): AngularDropdownPositionChanges | null => {\n    if (!this._isOpen$.getValue()) {\n      return null;\n    }\n\n    let dropdownElement = this.dropdownElement;\n    if (!dropdownElement || !this.triggerElement) {\n      return null;\n    }\n\n    let calculatePosition = this.renderInPlace\n      ? this.calculateInPlacePosition\n      : this.calculatePosition;\n\n    let options = {\n      horizontalPosition: this.horizontalPosition,\n      verticalPosition: this.verticalPosition,\n      matchTriggerWidth: this.matchTriggerWidth,\n      previousHorizontalPosition: this.previousHorizontalPosition,\n      previousVerticalPosition: this.previousVerticalPosition\n    };\n\n    let positionData = calculatePosition(\n      this.triggerElement,\n      dropdownElement,\n      options\n    );\n\n    return this.applyReposition(\n      this.triggerElement,\n      dropdownElement,\n      positionData\n    );\n  };\n\n  private applyReposition(\n    trigger: Element,\n    dropdown: HTMLElement,\n    positions: any\n  ): AngularDropdownPositionChanges {\n    let changes: any = {\n      hPosition: positions.horizontalPosition,\n      vPosition: positions.verticalPosition\n    };\n    if (positions.style) {\n      changes.top = `${positions.style.top}px`;\n      // The component can be aligned from the right or from the left, but not from both.\n      if (positions.style.left != null) {\n        changes.left = `${positions.style.left}px`;\n        changes.right = null;\n      } else if (positions.style.right != null) {\n        changes.right = `${positions.style.right}px`;\n        changes.left = null;\n      }\n      if (positions.style.width != null) {\n        changes.width = `${positions.style.width}px`;\n      }\n      if (this.position$.getValue().top == null) {\n        // Bypass on the first reposition only to avoid flickering.\n        Object.keys(positions.style).forEach(\n          k => (dropdown.style[k as any] = positions.style[k])\n        );\n      }\n    }\n\n    this.position$.next(changes);\n\n    this.previousHorizontalPosition = positions.horizontalPosition;\n    this.previousVerticalPosition = positions.verticalPosition;\n\n    return changes;\n  }\n\n  private initializeId(id?: string): void {\n    if (id) {\n      this.id = this.uniqueId = id;\n    } else {\n      this.uniqueId = generateDropdownId();\n      this.id = `ng-dropdown-${this.uniqueId}`;\n    }\n  }\n\n  private createDefaultWormholeOutlet(): void {\n    if (!this.document.getElementById('ng-dropdown-outlet')) {\n      let outlet = this.document.createElement('div');\n      outlet.id = 'ng-dropdown-outlet';\n      this.document.body.insertBefore(outlet, this.document.body.firstChild);\n    }\n  }\n}\n","import { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport {\n  Component,\n  Input,\n  Host,\n  Inject,\n  forwardRef,\n  AfterViewChecked,\n  OnInit,\n  OnDestroy,\n  NgZone\n} from '@angular/core';\n\nimport { DOCUMENT } from '@angular/common';\n\nimport { AngularDropdownDirective } from './angular-dropdown.directive';\nimport { closest, waitForAnimation } from './utils';\n\nconst MutationObserver = (window as any).MutationObserver;\n\n@Component({\n  selector: 'ng-dropdown-content,[ng-dropdown-content],[ngDropdownContent]',\n  templateUrl: './angular-dropdown-content.component.html',\n  styleUrls: ['./angular-dropdown-content.component.css'],\n  host: {\n    '[class.render-in-place]': 'dropdown.renderInPlace'\n  }\n})\nexport class AngularDropdownContentComponent\n  implements OnInit, AfterViewChecked, OnDestroy {\n  @Input()\n  dropdownClass = '';\n\n  @Input()\n  overlay = false;\n\n  private hasMoved = false;\n  private _animationClass: string | null = null;\n  private isTouchDevice: boolean = 'ontouchstart' in window;\n  private mutationObserver: MutationObserver | null = null;\n  private destroy$ = new Subject<void>();\n\n  @Input()\n  transitioningInClass = 'ng-dropdown-content--transitioning-in';\n  @Input()\n  transitionedInClass = 'ng-dropdown-content--transitioned-in';\n  @Input()\n  transitioningOutClass = 'ng-dropdown-content--transitioning-out';\n\n  private get dropdownElement(): HTMLElement {\n    return this.dropdown.dropdownElement;\n  }\n\n  private shouldOpen = false;\n  private document: Document;\n\n  constructor(\n    @Host()\n    @Inject(forwardRef(() => AngularDropdownDirective))\n    public dropdown: AngularDropdownDirective,\n    private zone: NgZone,\n    @Inject(DOCUMENT) document: any\n  ) {\n    this.document = document;\n  }\n\n  ngOnInit(): void {\n    this.dropdown.onOpen\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => (this.shouldOpen = true));\n\n    this.dropdown.onClose\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => this.close());\n  }\n\n  set animationClass(className: string | null) {\n    if (this._animationClass && className !== this._animationClass) {\n      this.dropdownElement.classList.remove(this._animationClass);\n    } else if (className) {\n      this.dropdownElement.classList.add(className);\n    }\n    this._animationClass = className;\n  }\n\n  get animationClass(): string | null {\n    return this._animationClass;\n  }\n\n  get triggerElement(): Element {\n    return this.dropdown.triggerElement;\n  }\n\n  ngAfterViewChecked() {\n    if (this.shouldOpen) {\n      this.animationClass = this.transitioningInClass;\n      requestAnimationFrame(() => this.open());\n      this.shouldOpen = false;\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.teardownEvents();\n  }\n\n  open(): void {\n    this.document.body.addEventListener(\n      'mousedown',\n      this.handleRootMouseDown,\n      true\n    );\n\n    if (this.isTouchDevice) {\n      this.document.body.addEventListener(\n        'touchstart',\n        this.touchStartHandler,\n        true\n      );\n      this.document.body.addEventListener(\n        'touchend',\n        this.handleRootMouseDown,\n        true\n      );\n    }\n\n    let changes = this.dropdown.reposition();\n    if (!this.dropdown.renderInPlace) {\n      this.addGlobalEvents();\n      this.startObservingDomMutations();\n    } else if (changes !== null && changes.vPosition === 'above') {\n      this.startObservingDomMutations();\n    }\n\n    requestAnimationFrame(() => this.animateIn());\n  }\n\n  close(): void {\n    this.teardownEvents();\n    this.animateOut();\n  }\n\n  private repositionInZone = () =>\n    this.zone.run(() => this.dropdown.reposition());\n\n  private animateIn(): void {\n    waitForAnimation(this.dropdownElement, () => {\n      this.animationClass = this.transitionedInClass;\n    });\n  }\n\n  private animateOut(): void {\n    let parentElement = this.dropdown.renderInPlace\n      ? this.dropdownElement.parentElement!.parentElement\n      : this.dropdownElement.parentElement;\n    let clone = this.dropdownElement.cloneNode(true) as HTMLElement;\n    clone.id = `${this.dropdownElement.id}--clone`;\n    clone.classList.remove(this.transitionedInClass);\n    clone.classList.remove(this.transitioningInClass);\n    clone.classList.add(this.transitioningOutClass);\n    parentElement!.appendChild(clone);\n    this.animationClass = this.transitioningInClass;\n    waitForAnimation(clone, () => parentElement!.removeChild(clone));\n  }\n\n  private handleRootMouseDown = (e: Event): void => {\n    if (\n      this.hasMoved ||\n      this.dropdownElement.contains(e.target as Element) ||\n      (this.triggerElement &&\n        this.triggerElement.contains(e.target as Element))\n    ) {\n      this.hasMoved = false;\n      return;\n    }\n\n    let closestDropdown = closest(e.target as Element, 'ng-dropdown-content');\n    if (closestDropdown) {\n      let trigger = this.document.querySelector(\n        `[aria-controls=${closestDropdown.getAttribute('id')}]`\n      );\n      let parentDropdown = closest(trigger!, 'ng-dropdown-content');\n      if (\n        parentDropdown &&\n        parentDropdown.getAttribute('id') === this.dropdown.dropdownId\n      ) {\n        this.hasMoved = false;\n        return;\n      }\n    }\n\n    this.dropdown.close(true);\n  };\n\n  private startObservingDomMutations(): void {\n    if (MutationObserver) {\n      this.mutationObserver = new MutationObserver((mutations: any) => {\n        if (\n          mutations[0].addedNodes.length ||\n          mutations[0].removedNodes.length\n        ) {\n          this.repositionInZone();\n        }\n      });\n      this.mutationObserver!.observe(this.dropdownElement, {\n        childList: true,\n        subtree: true\n      });\n    } else {\n      this.dropdownElement.addEventListener(\n        'DOMNodeInserted',\n        this.repositionInZone,\n        false\n      );\n      this.dropdownElement.addEventListener(\n        'DOMNodeRemoved',\n        this.repositionInZone,\n        false\n      );\n    }\n  }\n\n  private stopObservingDomMutations(): void {\n    if (MutationObserver) {\n      if (this.mutationObserver) {\n        this.mutationObserver.disconnect();\n        this.mutationObserver = null;\n      }\n    } else {\n      if (this.dropdownElement) {\n        this.dropdownElement.removeEventListener(\n          'DOMNodeInserted',\n          this.repositionInZone\n        );\n        this.dropdownElement.removeEventListener(\n          'DOMNodeRemoved',\n          this.repositionInZone\n        );\n      }\n    }\n  }\n\n  private addGlobalEvents(): void {\n    window.addEventListener('scroll', this.repositionInZone);\n    window.addEventListener('resize', this.repositionInZone);\n    window.addEventListener('orientationchange', this.repositionInZone);\n  }\n\n  private removeGlobalEvents(): void {\n    window.removeEventListener('scroll', this.repositionInZone);\n    window.removeEventListener('resize', this.repositionInZone);\n    window.removeEventListener('orientationchange', this.repositionInZone);\n  }\n\n  private touchStartHandler = (e: Event) => {\n    this.document.body.addEventListener(\n      'touchmove',\n      this.touchMoveHandler,\n      true\n    );\n  };\n\n  private touchMoveHandler = (e: Event) => {\n    this.hasMoved = true;\n    this.document.body.removeEventListener(\n      'touchmove',\n      this.touchMoveHandler,\n      true\n    );\n  };\n\n  private teardownEvents() {\n    this.removeGlobalEvents();\n    this.stopObservingDomMutations();\n    this.document.body.removeEventListener(\n      'mousedown',\n      this.handleRootMouseDown,\n      true\n    );\n\n    if (this.isTouchDevice) {\n      this.document.body.removeEventListener(\n        'touchstart',\n        this.touchStartHandler,\n        true\n      );\n      this.document.body.removeEventListener(\n        'touchend',\n        this.handleRootMouseDown,\n        true\n      );\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgWormholeModule } from 'ng-wormhole';\n\nimport { AngularDropdownDirective } from './angular-dropdown.directive';\nimport { AngularDropdownContentComponent } from './angular-dropdown-content.component';\nimport { AngularDropdownControlDirective } from './angular-dropdown-control.directive';\n\n@NgModule({\n  imports: [CommonModule, NgWormholeModule],\n  declarations: [\n    AngularDropdownDirective,\n    AngularDropdownControlDirective,\n    AngularDropdownContentComponent\n  ],\n  exports: [\n    AngularDropdownDirective,\n    AngularDropdownControlDirective,\n    AngularDropdownContentComponent\n  ]\n})\nexport class AngularDropdownModule {}\n"],"names":["calculatePosition"],"mappings":"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"}
