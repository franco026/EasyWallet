(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('rxjs/operators'), require('@angular/common'), require('ng-wormhole')) :
    typeof define === 'function' && define.amd ? define('angular-dropdown', ['exports', '@angular/core', 'rxjs', 'rxjs/operators', '@angular/common', 'ng-wormhole'], factory) :
    (factory((global['angular-dropdown'] = {}),global.ng.core,global.rxjs,global.rxjs.operators,global.ng.common,global.ngWormhole));
}(this, (function (exports,core,rxjs,operators,common,ngWormhole) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AngularDropdownControlDirective = /** @class */ (function () {
        function AngularDropdownControlDirective(dropdown, element) {
            this.dropdown = dropdown;
            this.element = element;
        }
        /**
         * @param {?} e
         * @return {?}
         */
        AngularDropdownControlDirective.prototype.onClick = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                e.stopPropagation();
                if (!this.dropdown.disabled) {
                    this.dropdown.toggle();
                }
            };
        AngularDropdownControlDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[ng-dropdown-control],[ngDropdownControl]',
                        host: {
                            '[attr.aria-haspopup]': 'true',
                            '[attr.aria-controls]': 'dropdown.id',
                            '[attr.aria-expanded]': 'dropdown.isOpen',
                            '[class.ng-dropdown-control]': 'true',
                            '[class.active]': 'dropdown.isOpen'
                        }
                    },] }
        ];
        AngularDropdownControlDirective.ctorParameters = function () {
            return [
                { type: AngularDropdownDirective, decorators: [{ type: core.Host }, { type: core.Inject, args: [core.forwardRef(function () { return AngularDropdownDirective; }),] }] },
                { type: core.ElementRef }
            ];
        };
        AngularDropdownControlDirective.propDecorators = {
            onClick: [{ type: core.HostListener, args: ['click', ['$event'],] }]
        };
        return AngularDropdownControlDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @param {?} element
     * @param {?} callback
     * @return {?}
     */
    function waitForAnimation(element, callback) {
        requestAnimationFrame(function () {
            /** @type {?} */
            var computedStyle = window.getComputedStyle(element);
            if (computedStyle.animationName !== 'none' &&
                computedStyle.animationPlayState === 'running') {
                return once(element, 'animationend', callback);
            }
            callback();
        });
    }
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} listener
     * @return {?}
     */
    function once(element, eventName, listener) {
        element.addEventListener(eventName, function listenOnce(e) {
            element.removeEventListener(eventName, listenOnce);
            return listener(e);
        });
    }
    /** @type {?} */
    var closest = (( /** @type {?} */(window))).Element && Element.prototype.closest ?
        function (el, s) { return el.closest(s); } :
        function closest(self, s) {
            /** @type {?} */
            var matches = ((( /** @type {?} */(self))).document || self.ownerDocument).querySelectorAll(s);
            /** @type {?} */
            var i;
            /** @type {?} */
            var el = self;
            do {
                i = matches.length;
                while (--i >= 0 && matches.item(i) !== el) { }
            } while ((i < 0) && (el = ( /** @type {?} */(el.parentElement))));
            return el;
        };
    /**
     * @param {?} trigger
     * @param {?} dropdown
     * @param {?} __2
     * @return {?}
     */
    function calculatePosition(trigger, dropdown, _a) {
        var horizontalPosition = _a.horizontalPosition, verticalPosition = _a.verticalPosition, matchTriggerWidth = _a.matchTriggerWidth, previousHorizontalPosition = _a.previousHorizontalPosition, previousVerticalPosition = _a.previousVerticalPosition;
        // Collect information about all the involved DOM elements
        /** @type {?} */
        var scroll = { left: window.pageXOffset, top: window.pageYOffset };
        var _b = trigger.getBoundingClientRect(), triggerLeft = _b.left, triggerTop = _b.top, triggerWidth = _b.width, triggerHeight = _b.height;
        var _c = dropdown.getBoundingClientRect(), dropdownHeight = _c.height, dropdownWidth = _c.width;
        /** @type {?} */
        var viewportWidth = window.innerWidth;
        /** @type {?} */
        var style = {};
        // Calculate drop down width
        dropdownWidth = matchTriggerWidth ? triggerWidth : dropdownWidth;
        if (matchTriggerWidth) {
            style.width = dropdownWidth;
        }
        // Calculate horizontal position
        /** @type {?} */
        var triggerLeftWithScroll = triggerLeft + scroll.left;
        if (horizontalPosition === 'auto') {
            // Calculate the number of visible horizontal pixels if we were to place the
            // dropdown on the left and right
            /** @type {?} */
            var leftVisible = Math.min(viewportWidth, triggerLeft + dropdownWidth) - Math.max(0, triggerLeft);
            /** @type {?} */
            var rightVisible = Math.min(viewportWidth, triggerLeft + triggerWidth) - Math.max(0, triggerLeft + triggerWidth - dropdownWidth);
            if (dropdownWidth > leftVisible && rightVisible > leftVisible) {
                // If the drop down won't fit left-aligned, and there is more space on the
                // right than on the left, then force right-aligned
                horizontalPosition = 'right';
            }
            else if (dropdownWidth > rightVisible && leftVisible > rightVisible) {
                // If the drop down won't fit right-aligned, and there is more space on
                // the left than on the right, then force left-aligned
                horizontalPosition = 'left';
            }
            else {
                // Keep same position as previous
                horizontalPosition = previousHorizontalPosition || 'left';
            }
        }
        if (horizontalPosition === 'right') {
            style.right = viewportWidth - (triggerLeftWithScroll + triggerWidth);
        }
        else if (horizontalPosition === 'center') {
            style.left = triggerLeftWithScroll + (triggerWidth - dropdownWidth) / 2;
        }
        else {
            style.left = triggerLeftWithScroll;
        }
        // Calculate vertical position
        /** @type {?} */
        var triggerTopWithScroll = triggerTop + scroll.top;
        if (verticalPosition === 'above') {
            style.top = triggerTopWithScroll - dropdownHeight;
        }
        else if (verticalPosition === 'below') {
            style.top = triggerTopWithScroll + triggerHeight;
        }
        else {
            /** @type {?} */
            var viewportBottom = scroll.top + self.window.innerHeight;
            /** @type {?} */
            var enoughRoomBelow = triggerTopWithScroll + triggerHeight + dropdownHeight < viewportBottom;
            /** @type {?} */
            var enoughRoomAbove = triggerTop > dropdownHeight;
            if (previousVerticalPosition === 'below' && !enoughRoomBelow && enoughRoomAbove) {
                verticalPosition = 'above';
            }
            else if (previousVerticalPosition === 'above' && !enoughRoomAbove && enoughRoomBelow) {
                verticalPosition = 'below';
            }
            else if (!previousVerticalPosition) {
                verticalPosition = enoughRoomBelow ? 'below' : 'above';
            }
            else {
                verticalPosition = previousVerticalPosition;
            }
            style.top = triggerTopWithScroll + (verticalPosition === 'below' ? triggerHeight : -dropdownHeight);
        }
        return { horizontalPosition: horizontalPosition, verticalPosition: verticalPosition, style: style };
    }
    /**
     * @param {?} trigger
     * @param {?} dropdown
     * @param {?} __2
     * @return {?}
     */
    function calculateInPlacePosition(trigger, dropdown, _a) {
        var horizontalPosition = _a.horizontalPosition, verticalPosition = _a.verticalPosition;
        /** @type {?} */
        var dropdownRect;
        /** @type {?} */
        var positionData = {};
        if (horizontalPosition === 'auto') {
            /** @type {?} */
            var triggerRect = trigger.getBoundingClientRect();
            dropdownRect = dropdown.getBoundingClientRect();
            /** @type {?} */
            var viewportRight = window.pageXOffset + window.innerWidth;
            positionData.horizontalPosition = triggerRect.left + dropdownRect.width > viewportRight ? 'right' : 'left';
        }
        if (verticalPosition === 'above') {
            positionData.verticalPosition = verticalPosition;
            dropdownRect = dropdownRect || dropdown.getBoundingClientRect();
            positionData.style = { top: -dropdownRect.height };
        }
        return positionData;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var id = 1;
    /**
     * @return {?}
     */
    function generateDropdownId() {
        return id++;
    }
    /** @type {?} */
    var EmptyDropdownContentPosition = Object.freeze({
        vPosition: null,
        hPosition: null,
        top: null,
        left: null,
        bottom: null,
        right: null
    });
    var AngularDropdownDirective = /** @class */ (function () {
        function AngularDropdownDirective(document, id) {
            var _this = this;
            this.renderInPlace = false;
            this.control = null;
            this.previousVerticalPosition = null;
            this.previousHorizontalPosition = null;
            this.matchTriggerWidth = false;
            this._isOpen$ = new rxjs.BehaviorSubject(false);
            this.isOpen$ = this._isOpen$.pipe(operators.skip(1));
            this.position$ = new rxjs.BehaviorSubject(EmptyDropdownContentPosition);
            this.calculatePosition = calculatePosition;
            this.calculateInPlacePosition = calculateInPlacePosition;
            this.disabled = false;
            this.beforeOpen = null;
            this.beforeClose = null;
            this.verticalPosition = 'auto';
            this.horizontalPosition = 'auto';
            this.onOpen = this.isOpen$.pipe(operators.filter(function (open) { return open === true; }));
            this.onClose = this.isOpen$.pipe(operators.filter(function (open) { return open === false; }));
            this.uniqueId = null;
            this.width = null;
            this.reposition = function () {
                if (!_this._isOpen$.getValue()) {
                    return null;
                }
                /** @type {?} */
                var dropdownElement = _this.dropdownElement;
                if (!dropdownElement || !_this.triggerElement) {
                    return null;
                }
                /** @type {?} */
                var calculatePosition$$1 = _this.renderInPlace
                    ? _this.calculateInPlacePosition
                    : _this.calculatePosition;
                /** @type {?} */
                var options = {
                    horizontalPosition: _this.horizontalPosition,
                    verticalPosition: _this.verticalPosition,
                    matchTriggerWidth: _this.matchTriggerWidth,
                    previousHorizontalPosition: _this.previousHorizontalPosition,
                    previousVerticalPosition: _this.previousVerticalPosition
                };
                /** @type {?} */
                var positionData = calculatePosition$$1(_this.triggerElement, dropdownElement, options);
                return _this.applyReposition(_this.triggerElement, dropdownElement, positionData);
            };
            this.document = document;
            this.initializeId(id);
            this.createDefaultWormholeOutlet();
        }
        Object.defineProperty(AngularDropdownDirective.prototype, "dropdownId", {
            get: /**
             * @return {?}
             */ function () {
                return "ng-dropdown-content-" + this.uniqueId;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AngularDropdownDirective.prototype, "triggerElement", {
            get: /**
             * @return {?}
             */ function () {
                return ( /** @type {?} */(this.control)).element.nativeElement;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AngularDropdownDirective.prototype, "dropdownElement", {
            get: /**
             * @return {?}
             */ function () {
                return ( /** @type {?} */(this.document.getElementById(this.dropdownId)));
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} __0
         * @return {?}
         */
        AngularDropdownDirective.prototype.ngOnChanges = /**
         * @param {?} __0
         * @return {?}
         */
            function (_a) {
                var disabled = _a.disabled;
                if (disabled &&
                    disabled.firstChange === false &&
                    disabled.currentValue === true &&
                    disabled.previousValue !== true) {
                    this.disable();
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.open = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.disabled || this._isOpen$.getValue()) {
                    return;
                }
                /** @type {?} */
                var open$ = rxjs.of(true);
                if (this.beforeOpen) {
                    /** @type {?} */
                    var result = this.beforeOpen();
                    open$ = result instanceof rxjs.Observable ? result : rxjs.of(result);
                }
                open$
                    .pipe(operators.first(), operators.filter(function (open) { return open === true; }))
                    .subscribe(function () { return _this._isOpen$.next(true); });
            };
        /**
         * @param {?=} skipFocus
         * @return {?}
         */
        AngularDropdownDirective.prototype.close = /**
         * @param {?=} skipFocus
         * @return {?}
         */
            function (skipFocus) {
                var _this = this;
                if (skipFocus === void 0) {
                    skipFocus = false;
                }
                if (this.disabled || !this._isOpen$.getValue()) {
                    return;
                }
                /** @type {?} */
                var close$ = rxjs.of(true);
                if (this.beforeClose) {
                    /** @type {?} */
                    var result = this.beforeClose();
                    close$ = result instanceof rxjs.Observable ? result : rxjs.of(result);
                }
                close$
                    .pipe(operators.first(), operators.filter(function (close) { return close === true; }))
                    .subscribe(function () {
                    Object.assign(_this, {
                        hPosition: null,
                        vPosition: null,
                        top: null,
                        right: null,
                        bottom: null,
                        left: null,
                        width: null,
                        previousVerticalPosition: null,
                        previousHorizontalPosition: null
                    });
                    _this._isOpen$.next(false);
                    if (!skipFocus) {
                        if (_this.triggerElement instanceof HTMLElement &&
                            _this.triggerElement.tabIndex > -1) {
                            _this.triggerElement.focus();
                        }
                    }
                });
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.toggle = /**
         * @return {?}
         */
            function () {
                if (this._isOpen$.getValue()) {
                    this.close();
                }
                else {
                    this.open();
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.disable = /**
         * @return {?}
         */
            function () {
                this.disabled = true;
                this.close();
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.enable = /**
         * @return {?}
         */
            function () {
                this.disabled = false;
            };
        /**
         * @param {?} trigger
         * @param {?} dropdown
         * @param {?} positions
         * @return {?}
         */
        AngularDropdownDirective.prototype.applyReposition = /**
         * @param {?} trigger
         * @param {?} dropdown
         * @param {?} positions
         * @return {?}
         */
            function (trigger, dropdown, positions) {
                /** @type {?} */
                var changes = {
                    hPosition: positions.horizontalPosition,
                    vPosition: positions.verticalPosition
                };
                if (positions.style) {
                    changes.top = positions.style.top + "px";
                    // The component can be aligned from the right or from the left, but not from both.
                    if (positions.style.left != null) {
                        changes.left = positions.style.left + "px";
                        changes.right = null;
                    }
                    else if (positions.style.right != null) {
                        changes.right = positions.style.right + "px";
                        changes.left = null;
                    }
                    if (positions.style.width != null) {
                        changes.width = positions.style.width + "px";
                    }
                    if (this.position$.getValue().top == null) {
                        // Bypass on the first reposition only to avoid flickering.
                        Object.keys(positions.style).forEach(function (k) { return (dropdown.style[( /** @type {?} */(k))] = positions.style[k]); });
                    }
                }
                this.position$.next(changes);
                this.previousHorizontalPosition = positions.horizontalPosition;
                this.previousVerticalPosition = positions.verticalPosition;
                return changes;
            };
        /**
         * @param {?=} id
         * @return {?}
         */
        AngularDropdownDirective.prototype.initializeId = /**
         * @param {?=} id
         * @return {?}
         */
            function (id) {
                if (id) {
                    this.id = this.uniqueId = id;
                }
                else {
                    this.uniqueId = generateDropdownId();
                    this.id = "ng-dropdown-" + this.uniqueId;
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.createDefaultWormholeOutlet = /**
         * @return {?}
         */
            function () {
                if (!this.document.getElementById('ng-dropdown-outlet')) {
                    /** @type {?} */
                    var outlet = this.document.createElement('div');
                    outlet.id = 'ng-dropdown-outlet';
                    this.document.body.insertBefore(outlet, this.document.body.firstChild);
                }
            };
        AngularDropdownDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: 'ng-dropdown,[ngDropdown],[ng-dropdown]',
                        host: {
                            '[class.render-in-place]': 'renderInPlace',
                            '[class.ng-dropdown]': 'true'
                        }
                    },] }
        ];
        AngularDropdownDirective.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] },
                { type: String, decorators: [{ type: core.Attribute, args: ['id',] }] }
            ];
        };
        AngularDropdownDirective.propDecorators = {
            renderInPlace: [{ type: core.Input }],
            control: [{ type: core.ContentChild, args: [AngularDropdownControlDirective,] }],
            calculatePosition: [{ type: core.Input }],
            calculateInPlacePosition: [{ type: core.Input }],
            disabled: [{ type: core.Input }],
            beforeOpen: [{ type: core.Input }],
            beforeClose: [{ type: core.Input }],
            verticalPosition: [{ type: core.Input }],
            horizontalPosition: [{ type: core.Input }],
            onOpen: [{ type: core.Output, args: ['open',] }],
            onClose: [{ type: core.Output, args: ['close',] }],
            dropdownContent: [{ type: core.ContentChild, args: [core.forwardRef(function () { return AngularDropdownContentComponent; }),] }]
        };
        return AngularDropdownDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MutationObserver = (( /** @type {?} */(window))).MutationObserver;
    var AngularDropdownContentComponent = /** @class */ (function () {
        function AngularDropdownContentComponent(dropdown, zone, document) {
            var _this = this;
            this.dropdown = dropdown;
            this.zone = zone;
            this.dropdownClass = '';
            this.overlay = false;
            this.hasMoved = false;
            this._animationClass = null;
            this.isTouchDevice = 'ontouchstart' in window;
            this.mutationObserver = null;
            this.destroy$ = new rxjs.Subject();
            this.transitioningInClass = 'ng-dropdown-content--transitioning-in';
            this.transitionedInClass = 'ng-dropdown-content--transitioned-in';
            this.transitioningOutClass = 'ng-dropdown-content--transitioning-out';
            this.shouldOpen = false;
            this.repositionInZone = function () {
                return _this.zone.run(function () { return _this.dropdown.reposition(); });
            };
            this.handleRootMouseDown = function (e) {
                if (_this.hasMoved ||
                    _this.dropdownElement.contains(( /** @type {?} */(e.target))) ||
                    (_this.triggerElement &&
                        _this.triggerElement.contains(( /** @type {?} */(e.target))))) {
                    _this.hasMoved = false;
                    return;
                }
                /** @type {?} */
                var closestDropdown = closest(( /** @type {?} */(e.target)), 'ng-dropdown-content');
                if (closestDropdown) {
                    /** @type {?} */
                    var trigger = _this.document.querySelector("[aria-controls=" + closestDropdown.getAttribute('id') + "]");
                    /** @type {?} */
                    var parentDropdown = closest(( /** @type {?} */(trigger)), 'ng-dropdown-content');
                    if (parentDropdown &&
                        parentDropdown.getAttribute('id') === _this.dropdown.dropdownId) {
                        _this.hasMoved = false;
                        return;
                    }
                }
                _this.dropdown.close(true);
            };
            this.touchStartHandler = function (e) {
                _this.document.body.addEventListener('touchmove', _this.touchMoveHandler, true);
            };
            this.touchMoveHandler = function (e) {
                _this.hasMoved = true;
                _this.document.body.removeEventListener('touchmove', _this.touchMoveHandler, true);
            };
            this.document = document;
        }
        Object.defineProperty(AngularDropdownContentComponent.prototype, "dropdownElement", {
            get: /**
             * @return {?}
             */ function () {
                return this.dropdown.dropdownElement;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.dropdown.onOpen
                    .pipe(operators.takeUntil(this.destroy$))
                    .subscribe(function () { return (_this.shouldOpen = true); });
                this.dropdown.onClose
                    .pipe(operators.takeUntil(this.destroy$))
                    .subscribe(function () { return _this.close(); });
            };
        Object.defineProperty(AngularDropdownContentComponent.prototype, "animationClass", {
            get: /**
             * @return {?}
             */ function () {
                return this._animationClass;
            },
            set: /**
             * @param {?} className
             * @return {?}
             */ function (className) {
                if (this._animationClass && className !== this._animationClass) {
                    this.dropdownElement.classList.remove(this._animationClass);
                }
                else if (className) {
                    this.dropdownElement.classList.add(className);
                }
                this._animationClass = className;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AngularDropdownContentComponent.prototype, "triggerElement", {
            get: /**
             * @return {?}
             */ function () {
                return this.dropdown.triggerElement;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.ngAfterViewChecked = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.shouldOpen) {
                    this.animationClass = this.transitioningInClass;
                    requestAnimationFrame(function () { return _this.open(); });
                    this.shouldOpen = false;
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.destroy$.next();
                this.teardownEvents();
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.open = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.document.body.addEventListener('mousedown', this.handleRootMouseDown, true);
                if (this.isTouchDevice) {
                    this.document.body.addEventListener('touchstart', this.touchStartHandler, true);
                    this.document.body.addEventListener('touchend', this.handleRootMouseDown, true);
                }
                /** @type {?} */
                var changes = this.dropdown.reposition();
                if (!this.dropdown.renderInPlace) {
                    this.addGlobalEvents();
                    this.startObservingDomMutations();
                }
                else if (changes !== null && changes.vPosition === 'above') {
                    this.startObservingDomMutations();
                }
                requestAnimationFrame(function () { return _this.animateIn(); });
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.close = /**
         * @return {?}
         */
            function () {
                this.teardownEvents();
                this.animateOut();
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.animateIn = /**
         * @return {?}
         */
            function () {
                var _this = this;
                waitForAnimation(this.dropdownElement, function () {
                    _this.animationClass = _this.transitionedInClass;
                });
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.animateOut = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var parentElement = this.dropdown.renderInPlace
                    ? ( /** @type {?} */(this.dropdownElement.parentElement)).parentElement
                    : this.dropdownElement.parentElement;
                /** @type {?} */
                var clone = ( /** @type {?} */(this.dropdownElement.cloneNode(true)));
                clone.id = this.dropdownElement.id + "--clone";
                clone.classList.remove(this.transitionedInClass);
                clone.classList.remove(this.transitioningInClass);
                clone.classList.add(this.transitioningOutClass);
                ( /** @type {?} */(parentElement)).appendChild(clone);
                this.animationClass = this.transitioningInClass;
                waitForAnimation(clone, function () { return ( /** @type {?} */(parentElement)).removeChild(clone); });
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.startObservingDomMutations = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (MutationObserver) {
                    this.mutationObserver = new MutationObserver(function (mutations) {
                        if (mutations[0].addedNodes.length ||
                            mutations[0].removedNodes.length) {
                            _this.repositionInZone();
                        }
                    });
                    ( /** @type {?} */(this.mutationObserver)).observe(this.dropdownElement, {
                        childList: true,
                        subtree: true
                    });
                }
                else {
                    this.dropdownElement.addEventListener('DOMNodeInserted', this.repositionInZone, false);
                    this.dropdownElement.addEventListener('DOMNodeRemoved', this.repositionInZone, false);
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.stopObservingDomMutations = /**
         * @return {?}
         */
            function () {
                if (MutationObserver) {
                    if (this.mutationObserver) {
                        this.mutationObserver.disconnect();
                        this.mutationObserver = null;
                    }
                }
                else {
                    if (this.dropdownElement) {
                        this.dropdownElement.removeEventListener('DOMNodeInserted', this.repositionInZone);
                        this.dropdownElement.removeEventListener('DOMNodeRemoved', this.repositionInZone);
                    }
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.addGlobalEvents = /**
         * @return {?}
         */
            function () {
                window.addEventListener('scroll', this.repositionInZone);
                window.addEventListener('resize', this.repositionInZone);
                window.addEventListener('orientationchange', this.repositionInZone);
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.removeGlobalEvents = /**
         * @return {?}
         */
            function () {
                window.removeEventListener('scroll', this.repositionInZone);
                window.removeEventListener('resize', this.repositionInZone);
                window.removeEventListener('orientationchange', this.repositionInZone);
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.teardownEvents = /**
         * @return {?}
         */
            function () {
                this.removeGlobalEvents();
                this.stopObservingDomMutations();
                this.document.body.removeEventListener('mousedown', this.handleRootMouseDown, true);
                if (this.isTouchDevice) {
                    this.document.body.removeEventListener('touchstart', this.touchStartHandler, true);
                    this.document.body.removeEventListener('touchend', this.handleRootMouseDown, true);
                }
            };
        AngularDropdownContentComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'ng-dropdown-content,[ng-dropdown-content],[ngDropdownContent]',
                        template: "<ng-container *ngIf=\"dropdown.isOpen$ | async as isOpen\">\n  <ng-container *ngWormhole=\"'#ng-dropdown-outlet'; renderInPlace: dropdown.renderInPlace\">\n    <div *ngIf=\"overlay && isOpen\" class=\"ng-dropdown-overlay\"></div>\n    <div [id]=\"dropdown.dropdownId\"\n        class=\"ng-dropdown-content {{dropdownClass}}\"\n        [style.top]=\"(dropdown.position$ | async).top\"\n        [style.right]=\"(dropdown.position$ | async).right\"\n        [style.bottom]=\"(dropdown.position$ | async).bottom\"\n        [style.left]=\"(dropdown.position$ | async).left\"\n        [class.render-in-place]=\"dropdown.renderInPlace\"\n        [class.ng-dropdown-content--above]=\"(dropdown.position$ | async).vPosition === 'above'\"\n        [class.ng-dropdown-content--below]=\"(dropdown.position$ | async).vPosition === 'below'\"\n        [class.ng-dropdown-content--right]=\"(dropdown.position$ | async).hPosition === 'right'\"\n        [class.ng-dropdown-content--center]=\"(dropdown.position$ | async).hPosition === 'center'\"\n        [class.ng-dropdown-content--left]=\"(dropdown.position$ | async).hPosition === 'left'\">\n      <ng-content></ng-content>\n    </div>\n  </ng-container>\n  <div *ngIf=\"!isOpen\" [id]=\"dropdown.dropdownId\" class=\"ng-dropdown-placeholder\"></div>\n</ng-container>\n",
                        host: {
                            '[class.render-in-place]': 'dropdown.renderInPlace'
                        },
                        styles: [":host{display:none}:host.render-in-place{display:block;position:absolute}"]
                    }] }
        ];
        AngularDropdownContentComponent.ctorParameters = function () {
            return [
                { type: AngularDropdownDirective, decorators: [{ type: core.Host }, { type: core.Inject, args: [core.forwardRef(function () { return AngularDropdownDirective; }),] }] },
                { type: core.NgZone },
                { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] }
            ];
        };
        AngularDropdownContentComponent.propDecorators = {
            dropdownClass: [{ type: core.Input }],
            overlay: [{ type: core.Input }],
            transitioningInClass: [{ type: core.Input }],
            transitionedInClass: [{ type: core.Input }],
            transitioningOutClass: [{ type: core.Input }]
        };
        return AngularDropdownContentComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AngularDropdownModule = /** @class */ (function () {
        function AngularDropdownModule() {
        }
        AngularDropdownModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, ngWormhole.NgWormholeModule],
                        declarations: [
                            AngularDropdownDirective,
                            AngularDropdownControlDirective,
                            AngularDropdownContentComponent
                        ],
                        exports: [
                            AngularDropdownDirective,
                            AngularDropdownControlDirective,
                            AngularDropdownContentComponent
                        ]
                    },] }
        ];
        return AngularDropdownModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.AngularDropdownContentComponent = AngularDropdownContentComponent;
    exports.AngularDropdownControlDirective = AngularDropdownControlDirective;
    exports.AngularDropdownDirective = AngularDropdownDirective;
    exports.AngularDropdownModule = AngularDropdownModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1kcm9wZG93bi51bWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL2FuZ3VsYXItZHJvcGRvd24vbGliL2FuZ3VsYXItZHJvcGRvd24tY29udHJvbC5kaXJlY3RpdmUudHMiLCJuZzovL2FuZ3VsYXItZHJvcGRvd24vbGliL3V0aWxzLnRzIiwibmc6Ly9hbmd1bGFyLWRyb3Bkb3duL2xpYi9hbmd1bGFyLWRyb3Bkb3duLmRpcmVjdGl2ZS50cyIsIm5nOi8vYW5ndWxhci1kcm9wZG93bi9saWIvYW5ndWxhci1kcm9wZG93bi1jb250ZW50LmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhci1kcm9wZG93bi9saWIvYW5ndWxhci1kcm9wZG93bi5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRGlyZWN0aXZlLFxuICBFbGVtZW50UmVmLFxuICBJbmplY3QsXG4gIGZvcndhcmRSZWYsXG4gIElucHV0LFxuICBIb3N0LFxuICBIb3N0TGlzdGVuZXJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSB9XG4gIGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi5kaXJlY3RpdmUnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbbmctZHJvcGRvd24tY29udHJvbF0sW25nRHJvcGRvd25Db250cm9sXScsXG4gIGhvc3Q6IHtcbiAgICAnW2F0dHIuYXJpYS1oYXNwb3B1cF0nOiAndHJ1ZScsXG4gICAgJ1thdHRyLmFyaWEtY29udHJvbHNdJzogJ2Ryb3Bkb3duLmlkJyxcbiAgICAnW2F0dHIuYXJpYS1leHBhbmRlZF0nOiAnZHJvcGRvd24uaXNPcGVuJyxcbiAgICAnW2NsYXNzLm5nLWRyb3Bkb3duLWNvbnRyb2xdJzogJ3RydWUnLFxuICAgICdbY2xhc3MuYWN0aXZlXSc6ICdkcm9wZG93bi5pc09wZW4nXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSB7XG4gIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJywgWyAnJGV2ZW50JyBdKVxuICBvbkNsaWNrKGU6IEV2ZW50KTogdm9pZCB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGlmICghdGhpcy5kcm9wZG93bi5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5kcm9wZG93bi50b2dnbGUoKTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIEBIb3N0KClcbiAgICAgIEBJbmplY3QoZm9yd2FyZFJlZigoKSA9PiBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUpKVxuICAgICAgcHVibGljIGRyb3Bkb3duOiBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUsXG4gICAgICBwdWJsaWMgZWxlbWVudDogRWxlbWVudFJlZikge1xuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gd2FpdEZvckFuaW1hdGlvbihlbGVtZW50OiBFbGVtZW50LCBjYWxsYmFjazogKGU/OiBFdmVudCkgPT4gYW55KTogdm9pZCB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgbGV0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuICAgIGlmIChjb21wdXRlZFN0eWxlLmFuaW1hdGlvbk5hbWUgIT09ICdub25lJyAmJlxuICAgICAgICBjb21wdXRlZFN0eWxlLmFuaW1hdGlvblBsYXlTdGF0ZSA9PT0gJ3J1bm5pbmcnKSB7XG4gICAgICByZXR1cm4gb25jZShlbGVtZW50LCAnYW5pbWF0aW9uZW5kJywgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIGNhbGxiYWNrKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvbmNlKGVsZW1lbnQ6IE5vZGUsIGV2ZW50TmFtZTogc3RyaW5nLCBsaXN0ZW5lcjogKGU6IEV2ZW50KSA9PiBhbnkpOiB2b2lkIHtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZnVuY3Rpb24gbGlzdGVuT25jZShlKSB7XG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuT25jZSk7XG5cbiAgICByZXR1cm4gbGlzdGVuZXIoZSk7XG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3QgY2xvc2VzdDogKGVsZW1lbnQ6IEVsZW1lbnQsIHNlbGVjdG9yOiBzdHJpbmcpID0+IEVsZW1lbnQgfCBudWxsXG4gID0gKHdpbmRvdyBhcyBhbnkpLkVsZW1lbnQgJiYgRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCA/XG4gICAgKGVsLCBzKSA9PiBlbC5jbG9zZXN0KHMpIDpcbiAgICBmdW5jdGlvbiBjbG9zZXN0KHNlbGY6IEVsZW1lbnQsIHM6IHN0cmluZykge1xuICAgICAgbGV0IG1hdGNoZXMgPSAoKHNlbGYgYXMgYW55KS5kb2N1bWVudCB8fCBzZWxmLm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwocyksXG4gICAgICAgIGksXG4gICAgICBlbCA9IHNlbGY7XG4gICAgICBkbyB7XG4gICAgICAgIGkgPSBtYXRjaGVzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKC0taSA+PSAwICYmIG1hdGNoZXMuaXRlbShpKSAhPT0gZWwpIHt9O1xuICAgICAgfSB3aGlsZSAoKGkgPCAwKSAmJiAoZWwgPSBlbC5wYXJlbnRFbGVtZW50ISkpO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVQb3NpdGlvbihcbiAgdHJpZ2dlcjogRWxlbWVudCxcbiAgZHJvcGRvd246IEVsZW1lbnQsXG4gIHsgaG9yaXpvbnRhbFBvc2l0aW9uLCB2ZXJ0aWNhbFBvc2l0aW9uLCBtYXRjaFRyaWdnZXJXaWR0aCwgcHJldmlvdXNIb3Jpem9udGFsUG9zaXRpb24sIHByZXZpb3VzVmVydGljYWxQb3NpdGlvbiB9OiBhbnkpOiBhbnkge1xuICAvLyBDb2xsZWN0IGluZm9ybWF0aW9uIGFib3V0IGFsbCB0aGUgaW52b2x2ZWQgRE9NIGVsZW1lbnRzXG4gIGxldCBzY3JvbGwgPSB7IGxlZnQ6IHdpbmRvdy5wYWdlWE9mZnNldCwgdG9wOiB3aW5kb3cucGFnZVlPZmZzZXQgfTtcbiAgbGV0IHtcbiAgICBsZWZ0OiB0cmlnZ2VyTGVmdCxcbiAgICB0b3A6IHRyaWdnZXJUb3AsXG4gICAgd2lkdGg6IHRyaWdnZXJXaWR0aCxcbiAgICBoZWlnaHQ6IHRyaWdnZXJIZWlnaHRcbiAgfSA9IHRyaWdnZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGxldCB7XG4gICAgaGVpZ2h0OiBkcm9wZG93bkhlaWdodCxcbiAgICB3aWR0aDogZHJvcGRvd25XaWR0aFxuICB9ID0gZHJvcGRvd24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGxldCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gIGxldCBzdHlsZTogYW55ID0ge307XG5cbiAgLy8gQ2FsY3VsYXRlIGRyb3AgZG93biB3aWR0aFxuICBkcm9wZG93bldpZHRoID0gbWF0Y2hUcmlnZ2VyV2lkdGggPyB0cmlnZ2VyV2lkdGggOiBkcm9wZG93bldpZHRoO1xuICBpZiAobWF0Y2hUcmlnZ2VyV2lkdGgpIHtcbiAgICBzdHlsZS53aWR0aCA9IGRyb3Bkb3duV2lkdGg7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgaG9yaXpvbnRhbCBwb3NpdGlvblxuICBsZXQgdHJpZ2dlckxlZnRXaXRoU2Nyb2xsID0gdHJpZ2dlckxlZnQgKyBzY3JvbGwubGVmdDtcbiAgaWYgKGhvcml6b250YWxQb3NpdGlvbiA9PT0gJ2F1dG8nKSB7XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgdmlzaWJsZSBob3Jpem9udGFsIHBpeGVscyBpZiB3ZSB3ZXJlIHRvIHBsYWNlIHRoZVxuICAgIC8vIGRyb3Bkb3duIG9uIHRoZSBsZWZ0IGFuZCByaWdodFxuICAgIGxldCBsZWZ0VmlzaWJsZSA9IE1hdGgubWluKHZpZXdwb3J0V2lkdGgsIHRyaWdnZXJMZWZ0ICsgZHJvcGRvd25XaWR0aCkgLSBNYXRoLm1heCgwLCB0cmlnZ2VyTGVmdCk7XG4gICAgbGV0IHJpZ2h0VmlzaWJsZSA9IE1hdGgubWluKHZpZXdwb3J0V2lkdGgsIHRyaWdnZXJMZWZ0ICsgdHJpZ2dlcldpZHRoKSAtIE1hdGgubWF4KDAsIHRyaWdnZXJMZWZ0ICsgdHJpZ2dlcldpZHRoIC0gZHJvcGRvd25XaWR0aCk7XG5cbiAgICBpZiAoZHJvcGRvd25XaWR0aCA+IGxlZnRWaXNpYmxlICYmIHJpZ2h0VmlzaWJsZSA+IGxlZnRWaXNpYmxlKSB7XG4gICAgICAvLyBJZiB0aGUgZHJvcCBkb3duIHdvbid0IGZpdCBsZWZ0LWFsaWduZWQsIGFuZCB0aGVyZSBpcyBtb3JlIHNwYWNlIG9uIHRoZVxuICAgICAgLy8gcmlnaHQgdGhhbiBvbiB0aGUgbGVmdCwgdGhlbiBmb3JjZSByaWdodC1hbGlnbmVkXG4gICAgICBob3Jpem9udGFsUG9zaXRpb24gPSAncmlnaHQnO1xuICAgIH0gZWxzZSBpZiAoZHJvcGRvd25XaWR0aCA+IHJpZ2h0VmlzaWJsZSAmJiBsZWZ0VmlzaWJsZSA+IHJpZ2h0VmlzaWJsZSkge1xuICAgICAgLy8gSWYgdGhlIGRyb3AgZG93biB3b24ndCBmaXQgcmlnaHQtYWxpZ25lZCwgYW5kIHRoZXJlIGlzIG1vcmUgc3BhY2Ugb25cbiAgICAgIC8vIHRoZSBsZWZ0IHRoYW4gb24gdGhlIHJpZ2h0LCB0aGVuIGZvcmNlIGxlZnQtYWxpZ25lZFxuICAgICAgaG9yaXpvbnRhbFBvc2l0aW9uID0gJ2xlZnQnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBLZWVwIHNhbWUgcG9zaXRpb24gYXMgcHJldmlvdXNcbiAgICAgIGhvcml6b250YWxQb3NpdGlvbiA9IHByZXZpb3VzSG9yaXpvbnRhbFBvc2l0aW9uIHx8ICdsZWZ0JztcbiAgICB9XG4gIH1cbiAgaWYgKGhvcml6b250YWxQb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgIHN0eWxlLnJpZ2h0ID0gdmlld3BvcnRXaWR0aCAtICh0cmlnZ2VyTGVmdFdpdGhTY3JvbGwgKyB0cmlnZ2VyV2lkdGgpO1xuICB9IGVsc2UgaWYgKGhvcml6b250YWxQb3NpdGlvbiA9PT0gJ2NlbnRlcicpIHtcbiAgICBzdHlsZS5sZWZ0ID0gdHJpZ2dlckxlZnRXaXRoU2Nyb2xsICsgKHRyaWdnZXJXaWR0aCAtIGRyb3Bkb3duV2lkdGgpIC8gMjtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5sZWZ0ID0gdHJpZ2dlckxlZnRXaXRoU2Nyb2xsO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIHZlcnRpY2FsIHBvc2l0aW9uXG4gIGxldCB0cmlnZ2VyVG9wV2l0aFNjcm9sbCA9IHRyaWdnZXJUb3AgKyBzY3JvbGwudG9wO1xuICBpZiAodmVydGljYWxQb3NpdGlvbiA9PT0gJ2Fib3ZlJykge1xuICAgIHN0eWxlLnRvcCA9IHRyaWdnZXJUb3BXaXRoU2Nyb2xsIC0gZHJvcGRvd25IZWlnaHQ7XG4gIH0gZWxzZSBpZiAodmVydGljYWxQb3NpdGlvbiA9PT0gJ2JlbG93Jykge1xuICAgIHN0eWxlLnRvcCA9IHRyaWdnZXJUb3BXaXRoU2Nyb2xsICsgdHJpZ2dlckhlaWdodDtcbiAgfSBlbHNlIHtcbiAgICBsZXQgdmlld3BvcnRCb3R0b20gPSBzY3JvbGwudG9wICsgc2VsZi53aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgbGV0IGVub3VnaFJvb21CZWxvdyA9IHRyaWdnZXJUb3BXaXRoU2Nyb2xsICsgdHJpZ2dlckhlaWdodCArIGRyb3Bkb3duSGVpZ2h0IDwgdmlld3BvcnRCb3R0b207XG4gICAgbGV0IGVub3VnaFJvb21BYm92ZSA9IHRyaWdnZXJUb3AgPiBkcm9wZG93bkhlaWdodDtcblxuICAgIGlmIChwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb24gPT09ICdiZWxvdycgJiYgIWVub3VnaFJvb21CZWxvdyAmJiBlbm91Z2hSb29tQWJvdmUpIHtcbiAgICAgIHZlcnRpY2FsUG9zaXRpb24gPSAnYWJvdmUnO1xuICAgIH0gZWxzZSBpZiAocHJldmlvdXNWZXJ0aWNhbFBvc2l0aW9uID09PSAnYWJvdmUnICYmICFlbm91Z2hSb29tQWJvdmUgJiYgZW5vdWdoUm9vbUJlbG93KSB7XG4gICAgICB2ZXJ0aWNhbFBvc2l0aW9uID0gJ2JlbG93JztcbiAgICB9IGVsc2UgaWYgKCFwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb24pIHtcbiAgICAgIHZlcnRpY2FsUG9zaXRpb24gPSBlbm91Z2hSb29tQmVsb3cgPyAnYmVsb3cnIDogJ2Fib3ZlJztcbiAgICB9IGVsc2Uge1xuICAgICAgdmVydGljYWxQb3NpdGlvbiA9IHByZXZpb3VzVmVydGljYWxQb3NpdGlvbjtcbiAgICB9XG4gICAgc3R5bGUudG9wID0gdHJpZ2dlclRvcFdpdGhTY3JvbGwgKyAodmVydGljYWxQb3NpdGlvbiA9PT0gJ2JlbG93JyA/IHRyaWdnZXJIZWlnaHQgOiAtZHJvcGRvd25IZWlnaHQpO1xuICB9XG5cbiAgcmV0dXJuIHsgaG9yaXpvbnRhbFBvc2l0aW9uLCB2ZXJ0aWNhbFBvc2l0aW9uLCBzdHlsZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlSW5QbGFjZVBvc2l0aW9uKFxuICAgIHRyaWdnZXI6IEVsZW1lbnQsXG4gICAgZHJvcGRvd246IEVsZW1lbnQsXG4gICAgeyBob3Jpem9udGFsUG9zaXRpb24sIHZlcnRpY2FsUG9zaXRpb24gfTogYW55KSB7XG4gIGxldCBkcm9wZG93blJlY3Q7XG4gIGxldCBwb3NpdGlvbkRhdGE6IGFueSA9IHt9O1xuXG4gIGlmIChob3Jpem9udGFsUG9zaXRpb24gPT09ICdhdXRvJykge1xuICAgIGxldCB0cmlnZ2VyUmVjdCA9IHRyaWdnZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgZHJvcGRvd25SZWN0ID0gZHJvcGRvd24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHZpZXdwb3J0UmlnaHQgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBwb3NpdGlvbkRhdGEuaG9yaXpvbnRhbFBvc2l0aW9uID0gdHJpZ2dlclJlY3QubGVmdCArIGRyb3Bkb3duUmVjdC53aWR0aCA+IHZpZXdwb3J0UmlnaHQgPyAncmlnaHQnIDogJ2xlZnQnO1xuICB9XG4gIGlmICh2ZXJ0aWNhbFBvc2l0aW9uID09PSAnYWJvdmUnKSB7XG4gICAgcG9zaXRpb25EYXRhLnZlcnRpY2FsUG9zaXRpb24gPSB2ZXJ0aWNhbFBvc2l0aW9uO1xuICAgIGRyb3Bkb3duUmVjdCA9IGRyb3Bkb3duUmVjdCB8fCBkcm9wZG93bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBwb3NpdGlvbkRhdGEuc3R5bGUgPSB7IHRvcDogLWRyb3Bkb3duUmVjdC5oZWlnaHQgfTtcbiAgfVxuICByZXR1cm4gcG9zaXRpb25EYXRhO1xufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgQmVoYXZpb3JTdWJqZWN0LCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc2tpcCwgZmlyc3QsIGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBEaXJlY3RpdmUsXG4gIEF0dHJpYnV0ZSxcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBFbGVtZW50UmVmLFxuICBBZnRlclZpZXdJbml0LFxuICBPbkNoYW5nZXMsXG4gIENvbnRlbnRDaGlsZCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgRXZlbnRFbWl0dGVyLFxuICBRdWVyeUxpc3QsXG4gIFZpZXdDb250YWluZXJSZWYsXG4gIGZvcndhcmRSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuaW1wb3J0IHsgQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSB9IGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi1jb250cm9sLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50IH0gZnJvbSAnLi9hbmd1bGFyLWRyb3Bkb3duLWNvbnRlbnQuY29tcG9uZW50JztcblxuaW1wb3J0IHsgY2FsY3VsYXRlUG9zaXRpb24sIGNhbGN1bGF0ZUluUGxhY2VQb3NpdGlvbiB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFuZ3VsYXJEcm9wZG93blBvc2l0aW9uQ2hhbmdlcyB7XG4gIHZQb3NpdGlvbjogJ2Fib3ZlJyB8ICdiZWxvdyc7XG4gIGhQb3NpdGlvbjogJ3JpZ2h0JyB8ICdjZW50ZXInIHwgJ2xlZnQnO1xufVxuXG5sZXQgaWQgPSAxO1xuZnVuY3Rpb24gZ2VuZXJhdGVEcm9wZG93bklkKCkge1xuICByZXR1cm4gaWQrKztcbn1cblxuZXhwb3J0IHR5cGUgVmVydGljYWxQb3NpdGlvbiA9ICdhdXRvJyB8ICdhYm92ZScgfCAnYmVsb3cnO1xuZXhwb3J0IHR5cGUgSG9yaXpvbnRhbFBvc2l0aW9uID0gJ2F1dG8nIHwgJ3JpZ2h0JyB8ICdjZW50ZXInIHwgJ2xlZnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERyb3Bkb3duQ29udGVudFBvc2l0aW9uIHtcbiAgcmVhZG9ubHkgaFBvc2l0aW9uOiBIb3Jpem9udGFsUG9zaXRpb24gfCBudWxsO1xuICByZWFkb25seSB2UG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gfCBudWxsO1xuICByZWFkb25seSB0b3A6IHN0cmluZyB8IG51bGw7XG4gIHJlYWRvbmx5IGxlZnQ6IHN0cmluZyB8IG51bGw7XG4gIHJlYWRvbmx5IGJvdHRvbTogc3RyaW5nIHwgbnVsbDtcbiAgcmVhZG9ubHkgcmlnaHQ6IHN0cmluZyB8IG51bGw7XG59XG5cbmNvbnN0IEVtcHR5RHJvcGRvd25Db250ZW50UG9zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcbiAgdlBvc2l0aW9uOiBudWxsLFxuICBoUG9zaXRpb246IG51bGwsXG4gIHRvcDogbnVsbCxcbiAgbGVmdDogbnVsbCxcbiAgYm90dG9tOiBudWxsLFxuICByaWdodDogbnVsbFxufSk7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ25nLWRyb3Bkb3duLFtuZ0Ryb3Bkb3duXSxbbmctZHJvcGRvd25dJyxcbiAgaG9zdDoge1xuICAgICdbY2xhc3MucmVuZGVyLWluLXBsYWNlXSc6ICdyZW5kZXJJblBsYWNlJyxcbiAgICAnW2NsYXNzLm5nLWRyb3Bkb3duXSc6ICd0cnVlJ1xuICB9XG59KVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG4gIGlkPzogc3RyaW5nO1xuXG4gIEBJbnB1dCgpXG4gIHJlbmRlckluUGxhY2UgPSBmYWxzZTtcblxuICBAQ29udGVudENoaWxkKEFuZ3VsYXJEcm9wZG93bkNvbnRyb2xEaXJlY3RpdmUpXG4gIGNvbnRyb2w6IEFuZ3VsYXJEcm9wZG93bkNvbnRyb2xEaXJlY3RpdmUgfCBudWxsID0gbnVsbDtcblxuICBwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gfCBudWxsID0gbnVsbDtcbiAgcHJldmlvdXNIb3Jpem9udGFsUG9zaXRpb246IEhvcml6b250YWxQb3NpdGlvbiB8IG51bGwgPSBudWxsO1xuICBtYXRjaFRyaWdnZXJXaWR0aCA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2lzT3BlbiQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcbiAgaXNPcGVuJCA9IHRoaXMuX2lzT3BlbiQucGlwZShza2lwKDEpKTtcblxuICBwb3NpdGlvbiQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFJlYWRvbmx5PERyb3Bkb3duQ29udGVudFBvc2l0aW9uPj4oXG4gICAgRW1wdHlEcm9wZG93bkNvbnRlbnRQb3NpdGlvblxuICApO1xuXG4gIGdldCBkcm9wZG93bklkKCkge1xuICAgIHJldHVybiBgbmctZHJvcGRvd24tY29udGVudC0ke3RoaXMudW5pcXVlSWR9YDtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGNhbGN1bGF0ZVBvc2l0aW9uOiBGdW5jdGlvbiA9IGNhbGN1bGF0ZVBvc2l0aW9uO1xuICBASW5wdXQoKVxuICBjYWxjdWxhdGVJblBsYWNlUG9zaXRpb246IEZ1bmN0aW9uID0gY2FsY3VsYXRlSW5QbGFjZVBvc2l0aW9uO1xuXG4gIEBJbnB1dCgpXG4gIGRpc2FibGVkID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgYmVmb3JlT3BlbjogKCgpID0+IGJvb2xlYW4gfCBPYnNlcnZhYmxlPGJvb2xlYW4+KSB8IG51bGwgPSBudWxsO1xuXG4gIEBJbnB1dCgpXG4gIGJlZm9yZUNsb3NlOiAoKCkgPT4gYm9vbGVhbiB8IE9ic2VydmFibGU8Ym9vbGVhbj4pIHwgbnVsbCA9IG51bGw7XG5cbiAgQElucHV0KClcbiAgcHVibGljIHZlcnRpY2FsUG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gPSAnYXV0byc7XG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBob3Jpem9udGFsUG9zaXRpb246IEhvcml6b250YWxQb3NpdGlvbiA9ICdhdXRvJztcblxuICBAT3V0cHV0KCdvcGVuJylcbiAgb25PcGVuID0gdGhpcy5pc09wZW4kLnBpcGUoZmlsdGVyKG9wZW4gPT4gb3BlbiA9PT0gdHJ1ZSkpO1xuXG4gIEBPdXRwdXQoJ2Nsb3NlJylcbiAgb25DbG9zZSA9IHRoaXMuaXNPcGVuJC5waXBlKGZpbHRlcihvcGVuID0+IG9wZW4gPT09IGZhbHNlKSk7XG5cbiAgZ2V0IHRyaWdnZXJFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sIS5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICBnZXQgZHJvcGRvd25FbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRyb3Bkb3duSWQpITtcbiAgfVxuXG4gIEBDb250ZW50Q2hpbGQoZm9yd2FyZFJlZigoKSA9PiBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50KSlcbiAgcHJpdmF0ZSBkcm9wZG93bkNvbnRlbnQ/OiBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50O1xuXG4gIHByaXZhdGUgdW5pcXVlSWQ6IG51bWJlciB8IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHdpZHRoOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBkb2N1bWVudDogRG9jdW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoQEluamVjdChET0NVTUVOVCkgZG9jdW1lbnQ6IGFueSwgQEF0dHJpYnV0ZSgnaWQnKSBpZD86IHN0cmluZykge1xuICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB0aGlzLmluaXRpYWxpemVJZChpZCk7XG4gICAgdGhpcy5jcmVhdGVEZWZhdWx0V29ybWhvbGVPdXRsZXQoKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKHsgZGlzYWJsZWQgfTogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIGRpc2FibGVkICYmXG4gICAgICBkaXNhYmxlZC5maXJzdENoYW5nZSA9PT0gZmFsc2UgJiZcbiAgICAgIGRpc2FibGVkLmN1cnJlbnRWYWx1ZSA9PT0gdHJ1ZSAmJlxuICAgICAgZGlzYWJsZWQucHJldmlvdXNWYWx1ZSAhPT0gdHJ1ZVxuICAgICkge1xuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLl9pc09wZW4kLmdldFZhbHVlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgb3BlbiQgPSBvZih0cnVlKTtcblxuICAgIGlmICh0aGlzLmJlZm9yZU9wZW4pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYmVmb3JlT3BlbigpO1xuICAgICAgb3BlbiQgPSByZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlID8gcmVzdWx0IDogb2YocmVzdWx0KTtcbiAgICB9XG5cbiAgICBvcGVuJFxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpcnN0KCksXG4gICAgICAgIGZpbHRlcihvcGVuID0+IG9wZW4gPT09IHRydWUpXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuX2lzT3BlbiQubmV4dCh0cnVlKSk7XG4gIH1cblxuICBjbG9zZShza2lwRm9jdXMgPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICF0aGlzLl9pc09wZW4kLmdldFZhbHVlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY2xvc2UkID0gb2YodHJ1ZSk7XG5cbiAgICBpZiAodGhpcy5iZWZvcmVDbG9zZSkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5iZWZvcmVDbG9zZSgpO1xuICAgICAgY2xvc2UkID0gcmVzdWx0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSA/IHJlc3VsdCA6IG9mKHJlc3VsdCk7XG4gICAgfVxuXG4gICAgY2xvc2UkXG4gICAgICAucGlwZShcbiAgICAgICAgZmlyc3QoKSxcbiAgICAgICAgZmlsdGVyKGNsb3NlID0+IGNsb3NlID09PSB0cnVlKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywge1xuICAgICAgICAgIGhQb3NpdGlvbjogbnVsbCxcbiAgICAgICAgICB2UG9zaXRpb246IG51bGwsXG4gICAgICAgICAgdG9wOiBudWxsLFxuICAgICAgICAgIHJpZ2h0OiBudWxsLFxuICAgICAgICAgIGJvdHRvbTogbnVsbCxcbiAgICAgICAgICBsZWZ0OiBudWxsLFxuICAgICAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgICAgIHByZXZpb3VzVmVydGljYWxQb3NpdGlvbjogbnVsbCxcbiAgICAgICAgICBwcmV2aW91c0hvcml6b250YWxQb3NpdGlvbjogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5faXNPcGVuJC5uZXh0KGZhbHNlKTtcblxuICAgICAgICBpZiAoIXNraXBGb2N1cykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJlxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyRWxlbWVudC50YWJJbmRleCA+IC0xXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHRvZ2dsZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faXNPcGVuJC5nZXRWYWx1ZSgpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2FibGUoKTogdm9pZCB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgZW5hYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHJlcG9zaXRpb24gPSAoKTogQW5ndWxhckRyb3Bkb3duUG9zaXRpb25DaGFuZ2VzIHwgbnVsbCA9PiB7XG4gICAgaWYgKCF0aGlzLl9pc09wZW4kLmdldFZhbHVlKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBkcm9wZG93bkVsZW1lbnQgPSB0aGlzLmRyb3Bkb3duRWxlbWVudDtcbiAgICBpZiAoIWRyb3Bkb3duRWxlbWVudCB8fCAhdGhpcy50cmlnZ2VyRWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IGNhbGN1bGF0ZVBvc2l0aW9uID0gdGhpcy5yZW5kZXJJblBsYWNlXG4gICAgICA/IHRoaXMuY2FsY3VsYXRlSW5QbGFjZVBvc2l0aW9uXG4gICAgICA6IHRoaXMuY2FsY3VsYXRlUG9zaXRpb247XG5cbiAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgIGhvcml6b250YWxQb3NpdGlvbjogdGhpcy5ob3Jpem9udGFsUG9zaXRpb24sXG4gICAgICB2ZXJ0aWNhbFBvc2l0aW9uOiB0aGlzLnZlcnRpY2FsUG9zaXRpb24sXG4gICAgICBtYXRjaFRyaWdnZXJXaWR0aDogdGhpcy5tYXRjaFRyaWdnZXJXaWR0aCxcbiAgICAgIHByZXZpb3VzSG9yaXpvbnRhbFBvc2l0aW9uOiB0aGlzLnByZXZpb3VzSG9yaXpvbnRhbFBvc2l0aW9uLFxuICAgICAgcHJldmlvdXNWZXJ0aWNhbFBvc2l0aW9uOiB0aGlzLnByZXZpb3VzVmVydGljYWxQb3NpdGlvblxuICAgIH07XG5cbiAgICBsZXQgcG9zaXRpb25EYXRhID0gY2FsY3VsYXRlUG9zaXRpb24oXG4gICAgICB0aGlzLnRyaWdnZXJFbGVtZW50LFxuICAgICAgZHJvcGRvd25FbGVtZW50LFxuICAgICAgb3B0aW9uc1xuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5hcHBseVJlcG9zaXRpb24oXG4gICAgICB0aGlzLnRyaWdnZXJFbGVtZW50LFxuICAgICAgZHJvcGRvd25FbGVtZW50LFxuICAgICAgcG9zaXRpb25EYXRhXG4gICAgKTtcbiAgfTtcblxuICBwcml2YXRlIGFwcGx5UmVwb3NpdGlvbihcbiAgICB0cmlnZ2VyOiBFbGVtZW50LFxuICAgIGRyb3Bkb3duOiBIVE1MRWxlbWVudCxcbiAgICBwb3NpdGlvbnM6IGFueVxuICApOiBBbmd1bGFyRHJvcGRvd25Qb3NpdGlvbkNoYW5nZXMge1xuICAgIGxldCBjaGFuZ2VzOiBhbnkgPSB7XG4gICAgICBoUG9zaXRpb246IHBvc2l0aW9ucy5ob3Jpem9udGFsUG9zaXRpb24sXG4gICAgICB2UG9zaXRpb246IHBvc2l0aW9ucy52ZXJ0aWNhbFBvc2l0aW9uXG4gICAgfTtcbiAgICBpZiAocG9zaXRpb25zLnN0eWxlKSB7XG4gICAgICBjaGFuZ2VzLnRvcCA9IGAke3Bvc2l0aW9ucy5zdHlsZS50b3B9cHhgO1xuICAgICAgLy8gVGhlIGNvbXBvbmVudCBjYW4gYmUgYWxpZ25lZCBmcm9tIHRoZSByaWdodCBvciBmcm9tIHRoZSBsZWZ0LCBidXQgbm90IGZyb20gYm90aC5cbiAgICAgIGlmIChwb3NpdGlvbnMuc3R5bGUubGVmdCAhPSBudWxsKSB7XG4gICAgICAgIGNoYW5nZXMubGVmdCA9IGAke3Bvc2l0aW9ucy5zdHlsZS5sZWZ0fXB4YDtcbiAgICAgICAgY2hhbmdlcy5yaWdodCA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHBvc2l0aW9ucy5zdHlsZS5yaWdodCAhPSBudWxsKSB7XG4gICAgICAgIGNoYW5nZXMucmlnaHQgPSBgJHtwb3NpdGlvbnMuc3R5bGUucmlnaHR9cHhgO1xuICAgICAgICBjaGFuZ2VzLmxlZnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHBvc2l0aW9ucy5zdHlsZS53aWR0aCAhPSBudWxsKSB7XG4gICAgICAgIGNoYW5nZXMud2lkdGggPSBgJHtwb3NpdGlvbnMuc3R5bGUud2lkdGh9cHhgO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucG9zaXRpb24kLmdldFZhbHVlKCkudG9wID09IG51bGwpIHtcbiAgICAgICAgLy8gQnlwYXNzIG9uIHRoZSBmaXJzdCByZXBvc2l0aW9uIG9ubHkgdG8gYXZvaWQgZmxpY2tlcmluZy5cbiAgICAgICAgT2JqZWN0LmtleXMocG9zaXRpb25zLnN0eWxlKS5mb3JFYWNoKFxuICAgICAgICAgIGsgPT4gKGRyb3Bkb3duLnN0eWxlW2sgYXMgYW55XSA9IHBvc2l0aW9ucy5zdHlsZVtrXSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnBvc2l0aW9uJC5uZXh0KGNoYW5nZXMpO1xuXG4gICAgdGhpcy5wcmV2aW91c0hvcml6b250YWxQb3NpdGlvbiA9IHBvc2l0aW9ucy5ob3Jpem9udGFsUG9zaXRpb247XG4gICAgdGhpcy5wcmV2aW91c1ZlcnRpY2FsUG9zaXRpb24gPSBwb3NpdGlvbnMudmVydGljYWxQb3NpdGlvbjtcblxuICAgIHJldHVybiBjaGFuZ2VzO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplSWQoaWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIHRoaXMuaWQgPSB0aGlzLnVuaXF1ZUlkID0gaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudW5pcXVlSWQgPSBnZW5lcmF0ZURyb3Bkb3duSWQoKTtcbiAgICAgIHRoaXMuaWQgPSBgbmctZHJvcGRvd24tJHt0aGlzLnVuaXF1ZUlkfWA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVEZWZhdWx0V29ybWhvbGVPdXRsZXQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZy1kcm9wZG93bi1vdXRsZXQnKSkge1xuICAgICAgbGV0IG91dGxldCA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBvdXRsZXQuaWQgPSAnbmctZHJvcGRvd24tb3V0bGV0JztcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUob3V0bGV0LCB0aGlzLmRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSW5wdXQsXG4gIEhvc3QsXG4gIEluamVjdCxcbiAgZm9yd2FyZFJlZixcbiAgQWZ0ZXJWaWV3Q2hlY2tlZCxcbiAgT25Jbml0LFxuICBPbkRlc3Ryb3ksXG4gIE5nWm9uZVxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5pbXBvcnQgeyBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tICcuL2FuZ3VsYXItZHJvcGRvd24uZGlyZWN0aXZlJztcbmltcG9ydCB7IGNsb3Nlc3QsIHdhaXRGb3JBbmltYXRpb24gfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgTXV0YXRpb25PYnNlcnZlciA9ICh3aW5kb3cgYXMgYW55KS5NdXRhdGlvbk9ic2VydmVyO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZy1kcm9wZG93bi1jb250ZW50LFtuZy1kcm9wZG93bi1jb250ZW50XSxbbmdEcm9wZG93bkNvbnRlbnRdJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2FuZ3VsYXItZHJvcGRvd24tY29udGVudC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2FuZ3VsYXItZHJvcGRvd24tY29udGVudC5jb21wb25lbnQuY3NzJ10sXG4gIGhvc3Q6IHtcbiAgICAnW2NsYXNzLnJlbmRlci1pbi1wbGFjZV0nOiAnZHJvcGRvd24ucmVuZGVySW5QbGFjZSdcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50XG4gIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xuICBASW5wdXQoKVxuICBkcm9wZG93bkNsYXNzID0gJyc7XG5cbiAgQElucHV0KClcbiAgb3ZlcmxheSA9IGZhbHNlO1xuXG4gIHByaXZhdGUgaGFzTW92ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfYW5pbWF0aW9uQ2xhc3M6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzVG91Y2hEZXZpY2U6IGJvb2xlYW4gPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3c7XG4gIHByaXZhdGUgbXV0YXRpb25PYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICBASW5wdXQoKVxuICB0cmFuc2l0aW9uaW5nSW5DbGFzcyA9ICduZy1kcm9wZG93bi1jb250ZW50LS10cmFuc2l0aW9uaW5nLWluJztcbiAgQElucHV0KClcbiAgdHJhbnNpdGlvbmVkSW5DbGFzcyA9ICduZy1kcm9wZG93bi1jb250ZW50LS10cmFuc2l0aW9uZWQtaW4nO1xuICBASW5wdXQoKVxuICB0cmFuc2l0aW9uaW5nT3V0Q2xhc3MgPSAnbmctZHJvcGRvd24tY29udGVudC0tdHJhbnNpdGlvbmluZy1vdXQnO1xuXG4gIHByaXZhdGUgZ2V0IGRyb3Bkb3duRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuZHJvcGRvd24uZHJvcGRvd25FbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRPcGVuID0gZmFsc2U7XG4gIHByaXZhdGUgZG9jdW1lbnQ6IERvY3VtZW50O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBIb3N0KClcbiAgICBASW5qZWN0KGZvcndhcmRSZWYoKCkgPT4gQW5ndWxhckRyb3Bkb3duRGlyZWN0aXZlKSlcbiAgICBwdWJsaWMgZHJvcGRvd246IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSxcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcbiAgICBASW5qZWN0KERPQ1VNRU5UKSBkb2N1bWVudDogYW55XG4gICkge1xuICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuZHJvcGRvd24ub25PcGVuXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKCgpID0+ICh0aGlzLnNob3VsZE9wZW4gPSB0cnVlKSk7XG5cbiAgICB0aGlzLmRyb3Bkb3duLm9uQ2xvc2VcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxuXG4gIHNldCBhbmltYXRpb25DbGFzcyhjbGFzc05hbWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodGhpcy5fYW5pbWF0aW9uQ2xhc3MgJiYgY2xhc3NOYW1lICE9PSB0aGlzLl9hbmltYXRpb25DbGFzcykge1xuICAgICAgdGhpcy5kcm9wZG93bkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9hbmltYXRpb25DbGFzcyk7XG4gICAgfSBlbHNlIGlmIChjbGFzc05hbWUpIHtcbiAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgdGhpcy5fYW5pbWF0aW9uQ2xhc3MgPSBjbGFzc05hbWU7XG4gIH1cblxuICBnZXQgYW5pbWF0aW9uQ2xhc3MoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuX2FuaW1hdGlvbkNsYXNzO1xuICB9XG5cbiAgZ2V0IHRyaWdnZXJFbGVtZW50KCk6IEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmRyb3Bkb3duLnRyaWdnZXJFbGVtZW50O1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIGlmICh0aGlzLnNob3VsZE9wZW4pIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uQ2xhc3MgPSB0aGlzLnRyYW5zaXRpb25pbmdJbkNsYXNzO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMub3BlbigpKTtcbiAgICAgIHRoaXMuc2hvdWxkT3BlbiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgIHRoaXMudGVhcmRvd25FdmVudHMoKTtcbiAgfVxuXG4gIG9wZW4oKTogdm9pZCB7XG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnbW91c2Vkb3duJyxcbiAgICAgIHRoaXMuaGFuZGxlUm9vdE1vdXNlRG93bixcbiAgICAgIHRydWVcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuaXNUb3VjaERldmljZSkge1xuICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICd0b3VjaHN0YXJ0JyxcbiAgICAgICAgdGhpcy50b3VjaFN0YXJ0SGFuZGxlcixcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAndG91Y2hlbmQnLFxuICAgICAgICB0aGlzLmhhbmRsZVJvb3RNb3VzZURvd24sXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IGNoYW5nZXMgPSB0aGlzLmRyb3Bkb3duLnJlcG9zaXRpb24oKTtcbiAgICBpZiAoIXRoaXMuZHJvcGRvd24ucmVuZGVySW5QbGFjZSkge1xuICAgICAgdGhpcy5hZGRHbG9iYWxFdmVudHMoKTtcbiAgICAgIHRoaXMuc3RhcnRPYnNlcnZpbmdEb21NdXRhdGlvbnMoKTtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZXMgIT09IG51bGwgJiYgY2hhbmdlcy52UG9zaXRpb24gPT09ICdhYm92ZScpIHtcbiAgICAgIHRoaXMuc3RhcnRPYnNlcnZpbmdEb21NdXRhdGlvbnMoKTtcbiAgICB9XG5cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hbmltYXRlSW4oKSk7XG4gIH1cblxuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnRlYXJkb3duRXZlbnRzKCk7XG4gICAgdGhpcy5hbmltYXRlT3V0KCk7XG4gIH1cblxuICBwcml2YXRlIHJlcG9zaXRpb25JblpvbmUgPSAoKSA9PlxuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4gdGhpcy5kcm9wZG93bi5yZXBvc2l0aW9uKCkpO1xuXG4gIHByaXZhdGUgYW5pbWF0ZUluKCk6IHZvaWQge1xuICAgIHdhaXRGb3JBbmltYXRpb24odGhpcy5kcm9wZG93bkVsZW1lbnQsICgpID0+IHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uQ2xhc3MgPSB0aGlzLnRyYW5zaXRpb25lZEluQ2xhc3M7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFuaW1hdGVPdXQoKTogdm9pZCB7XG4gICAgbGV0IHBhcmVudEVsZW1lbnQgPSB0aGlzLmRyb3Bkb3duLnJlbmRlckluUGxhY2VcbiAgICAgID8gdGhpcy5kcm9wZG93bkVsZW1lbnQucGFyZW50RWxlbWVudCEucGFyZW50RWxlbWVudFxuICAgICAgOiB0aGlzLmRyb3Bkb3duRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIGxldCBjbG9uZSA9IHRoaXMuZHJvcGRvd25FbGVtZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjbG9uZS5pZCA9IGAke3RoaXMuZHJvcGRvd25FbGVtZW50LmlkfS0tY2xvbmVgO1xuICAgIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUodGhpcy50cmFuc2l0aW9uZWRJbkNsYXNzKTtcbiAgICBjbG9uZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMudHJhbnNpdGlvbmluZ0luQ2xhc3MpO1xuICAgIGNsb25lLmNsYXNzTGlzdC5hZGQodGhpcy50cmFuc2l0aW9uaW5nT3V0Q2xhc3MpO1xuICAgIHBhcmVudEVsZW1lbnQhLmFwcGVuZENoaWxkKGNsb25lKTtcbiAgICB0aGlzLmFuaW1hdGlvbkNsYXNzID0gdGhpcy50cmFuc2l0aW9uaW5nSW5DbGFzcztcbiAgICB3YWl0Rm9yQW5pbWF0aW9uKGNsb25lLCAoKSA9PiBwYXJlbnRFbGVtZW50IS5yZW1vdmVDaGlsZChjbG9uZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVSb290TW91c2VEb3duID0gKGU6IEV2ZW50KTogdm9pZCA9PiB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5oYXNNb3ZlZCB8fFxuICAgICAgdGhpcy5kcm9wZG93bkVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQgYXMgRWxlbWVudCkgfHxcbiAgICAgICh0aGlzLnRyaWdnZXJFbGVtZW50ICYmXG4gICAgICAgIHRoaXMudHJpZ2dlckVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQgYXMgRWxlbWVudCkpXG4gICAgKSB7XG4gICAgICB0aGlzLmhhc01vdmVkID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGNsb3Nlc3REcm9wZG93biA9IGNsb3Nlc3QoZS50YXJnZXQgYXMgRWxlbWVudCwgJ25nLWRyb3Bkb3duLWNvbnRlbnQnKTtcbiAgICBpZiAoY2xvc2VzdERyb3Bkb3duKSB7XG4gICAgICBsZXQgdHJpZ2dlciA9IHRoaXMuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYFthcmlhLWNvbnRyb2xzPSR7Y2xvc2VzdERyb3Bkb3duLmdldEF0dHJpYnV0ZSgnaWQnKX1dYFxuICAgICAgKTtcbiAgICAgIGxldCBwYXJlbnREcm9wZG93biA9IGNsb3Nlc3QodHJpZ2dlciEsICduZy1kcm9wZG93bi1jb250ZW50Jyk7XG4gICAgICBpZiAoXG4gICAgICAgIHBhcmVudERyb3Bkb3duICYmXG4gICAgICAgIHBhcmVudERyb3Bkb3duLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gdGhpcy5kcm9wZG93bi5kcm9wZG93bklkXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5oYXNNb3ZlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kcm9wZG93bi5jbG9zZSh0cnVlKTtcbiAgfTtcblxuICBwcml2YXRlIHN0YXJ0T2JzZXJ2aW5nRG9tTXV0YXRpb25zKCk6IHZvaWQge1xuICAgIGlmIChNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG11dGF0aW9uc1swXS5hZGRlZE5vZGVzLmxlbmd0aCB8fFxuICAgICAgICAgIG11dGF0aW9uc1swXS5yZW1vdmVkTm9kZXMubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMucmVwb3NpdGlvbkluWm9uZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciEub2JzZXJ2ZSh0aGlzLmRyb3Bkb3duRWxlbWVudCwge1xuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRyb3Bkb3duRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnRE9NTm9kZUluc2VydGVkJyxcbiAgICAgICAgdGhpcy5yZXBvc2l0aW9uSW5ab25lLFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICdET01Ob2RlUmVtb3ZlZCcsXG4gICAgICAgIHRoaXMucmVwb3NpdGlvbkluWm9uZSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdG9wT2JzZXJ2aW5nRG9tTXV0YXRpb25zKCk6IHZvaWQge1xuICAgIGlmIChNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICBpZiAodGhpcy5tdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmRyb3Bkb3duRWxlbWVudCkge1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgICdET01Ob2RlSW5zZXJ0ZWQnLFxuICAgICAgICAgIHRoaXMucmVwb3NpdGlvbkluWm9uZVxuICAgICAgICApO1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgICdET01Ob2RlUmVtb3ZlZCcsXG4gICAgICAgICAgdGhpcy5yZXBvc2l0aW9uSW5ab25lXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRHbG9iYWxFdmVudHMoKTogdm9pZCB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMucmVwb3NpdGlvbkluWm9uZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVwb3NpdGlvbkluWm9uZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5yZXBvc2l0aW9uSW5ab25lKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlR2xvYmFsRXZlbnRzKCk6IHZvaWQge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnJlcG9zaXRpb25JblpvbmUpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlcG9zaXRpb25JblpvbmUpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMucmVwb3NpdGlvbkluWm9uZSk7XG4gIH1cblxuICBwcml2YXRlIHRvdWNoU3RhcnRIYW5kbGVyID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAndG91Y2htb3ZlJyxcbiAgICAgIHRoaXMudG91Y2hNb3ZlSGFuZGxlcixcbiAgICAgIHRydWVcbiAgICApO1xuICB9O1xuXG4gIHByaXZhdGUgdG91Y2hNb3ZlSGFuZGxlciA9IChlOiBFdmVudCkgPT4ge1xuICAgIHRoaXMuaGFzTW92ZWQgPSB0cnVlO1xuICAgIHRoaXMuZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgJ3RvdWNobW92ZScsXG4gICAgICB0aGlzLnRvdWNoTW92ZUhhbmRsZXIsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgfTtcblxuICBwcml2YXRlIHRlYXJkb3duRXZlbnRzKCkge1xuICAgIHRoaXMucmVtb3ZlR2xvYmFsRXZlbnRzKCk7XG4gICAgdGhpcy5zdG9wT2JzZXJ2aW5nRG9tTXV0YXRpb25zKCk7XG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAnbW91c2Vkb3duJyxcbiAgICAgIHRoaXMuaGFuZGxlUm9vdE1vdXNlRG93bixcbiAgICAgIHRydWVcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuaXNUb3VjaERldmljZSkge1xuICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICd0b3VjaHN0YXJ0JyxcbiAgICAgICAgdGhpcy50b3VjaFN0YXJ0SGFuZGxlcixcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAndG91Y2hlbmQnLFxuICAgICAgICB0aGlzLmhhbmRsZVJvb3RNb3VzZURvd24sXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuaW1wb3J0IHsgTmdXb3JtaG9sZU1vZHVsZSB9IGZyb20gJ25nLXdvcm1ob2xlJztcblxuaW1wb3J0IHsgQW5ndWxhckRyb3Bkb3duRGlyZWN0aXZlIH0gZnJvbSAnLi9hbmd1bGFyLWRyb3Bkb3duLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50IH0gZnJvbSAnLi9hbmd1bGFyLWRyb3Bkb3duLWNvbnRlbnQuY29tcG9uZW50JztcbmltcG9ydCB7IEFuZ3VsYXJEcm9wZG93bkNvbnRyb2xEaXJlY3RpdmUgfSBmcm9tICcuL2FuZ3VsYXItZHJvcGRvd24tY29udHJvbC5kaXJlY3RpdmUnO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBOZ1dvcm1ob2xlTW9kdWxlXSxcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgQW5ndWxhckRyb3Bkb3duRGlyZWN0aXZlLFxuICAgIEFuZ3VsYXJEcm9wZG93bkNvbnRyb2xEaXJlY3RpdmUsXG4gICAgQW5ndWxhckRyb3Bkb3duQ29udGVudENvbXBvbmVudFxuICBdLFxuICBleHBvcnRzOiBbXG4gICAgQW5ndWxhckRyb3Bkb3duRGlyZWN0aXZlLFxuICAgIEFuZ3VsYXJEcm9wZG93bkNvbnRyb2xEaXJlY3RpdmUsXG4gICAgQW5ndWxhckRyb3Bkb3duQ29udGVudENvbXBvbmVudFxuICBdXG59KVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXJEcm9wZG93bk1vZHVsZSB7fVxuIl0sIm5hbWVzIjpbIkRpcmVjdGl2ZSIsIkhvc3QiLCJJbmplY3QiLCJmb3J3YXJkUmVmIiwiRWxlbWVudFJlZiIsIkhvc3RMaXN0ZW5lciIsIkJlaGF2aW9yU3ViamVjdCIsInNraXAiLCJmaWx0ZXIiLCJjYWxjdWxhdGVQb3NpdGlvbiIsIm9mIiwiT2JzZXJ2YWJsZSIsImZpcnN0IiwiRE9DVU1FTlQiLCJBdHRyaWJ1dGUiLCJJbnB1dCIsIkNvbnRlbnRDaGlsZCIsIk91dHB1dCIsIlN1YmplY3QiLCJ0YWtlVW50aWwiLCJDb21wb25lbnQiLCJOZ1pvbmUiLCJOZ01vZHVsZSIsIkNvbW1vbk1vZHVsZSIsIk5nV29ybWhvbGVNb2R1bGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtRQWlDRSx5Q0FHVyxRQUFrQyxFQUNsQyxPQUFtQjtZQURuQixhQUFRLEdBQVIsUUFBUSxDQUEwQjtZQUNsQyxZQUFPLEdBQVAsT0FBTyxDQUFZO1NBQzdCOzs7OztRQWJELGlEQUFPOzs7O1lBRFAsVUFDUSxDQUFRO2dCQUNkLENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQztnQkFFcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFO29CQUMzQixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO2lC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